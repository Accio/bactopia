/*
This file includes default values for all Bactopia parameters.
*/

params {

    // Input Parameters
    fastqs = null
    R1 = null
    R2 = null
    SE = null
    sample = null
    hybrid = false
    accessions = null
    accession = null
    assembly = null
    reassemble = false

    // Dataset Parameters
    datasets = null
    species = null

    // Optional Parameters
    coverage = 100
    genome_size = "0"
    outdir = './'
    skip_compression = false
    keep_all_files = false

    // Max Job Request Parameters
    max_retry = 3
    max_time = 120
    max_memory = 32
    max_cpus = 4

    // Nextflow Configuration Parameters
    /* Nextflow config files
    nfconfig - allows you to provide your own config file to Nextflow

    What this means is you can adjust process rules such as max runtimes, cpu and 
        memory usage, etc...

    Most importantly, this means you can create a profile that allows you to better
        use Bactopia in your environment. This will allow you to create a profile 
        for things such as Sun Grid Engine, SLURM, AWS, etc...

    If you provide a config, its loaded after the default configs. So any changes 
        to the defaults in your config will be reflected.

    Links to Nextflow Docs:
        Nextflow Docs: https://www.nextflow.io/docs/latest/config.html#scope-process
        Nextflow Docs: https://www.nextflow.io/docs/latest/config.html#config-profiles
        Nextflow Executors: https://www.nextflow.io/docs/latest/executor.html
    */
    nfconfig = null
    publish_mode = 'copy'
    infodir = "${params.outdir}/bactopia-info"
    force = false
    cleanup_workdir = false

    // Nextflow Profile Parameters
    condadir = "${baseDir}/conda/envs"
    registry = "dockerhub"
    singularity_cache = "$HOME/.bactopia/singularity"
    queue = 'general,high-memory'
    disable_scratch = false
    aws_region = 'us-east-1'
    aws_volumes = '/opt/conda:/mnt/conda'
    aws_cli_path = '/home/ec2-user/conda/bin/aws'
    aws_upload_storage_class = 'STANDARD'
    aws_max_parallel_transfers = 8
    aws_delay_between_attempts = 15
    aws_max_transfer_attempts = 3
    aws_max_retry = 4
    aws_ecr_registry = null

    // Generic Parameters
    version = null
    help = null
    help_all = false
    show_hidden_params = false
    nfdir = false
    sleep_time = 5
    available_datasets = null
    check_fastqs = null
    example_fastqs = null
    validate_params = true

    //nf-core
    monochrome_logs = false
    schema_ignore_params = 'conda_help,empty_proteins,empty_tf,envname,help_all,include_tools,min_time,publish_dir,silent,test_data,test_data_dir,verbose,schema_inputs'
    schema_inputs = ['fastqs', 'R1,R2,SE,sample,hybrid', 'R1,R2,sample', 'SE,sample', 'assembly,sample', 'accessions', 'accession']

    // Nexflow 
    min_time = 60

    // Parameters to ignore
    envname = null
    include_tools = null
    verbose = null
    silent = null
    conda_help = false
    empty_proteins = "${baseDir}/data/EMPTY_PROTEINS"
    empty_tf = "${baseDir}/data/EMPTY_TF"

    // Testing
    test_data_dir = 'https://raw.githubusercontent.com/bactopia/bactopia-tests/main/data'

    //  Gather Samples Parameters
    /*
        The default value for min_basepairs is based on having a minimum of 20x coverage
        of Nasuia deltocephalinicola (https://en.wikipedia.org/wiki/Nasuia_deltocephalinicola).
        At the time (2019-08-07), it had the smallest genome of all bacteria, clocking in at
        112,091 nucleotides. At 20x, the minimum basepairs required is only ~2Mbp.

        Please, consider this parameter as a technical parameter to prevent downstream
        analyses from failing due to very low coverage. You will need to determine if the
        coverage of processed samples is sufficient or not.

        The default value for min_reads is min_basepairs / 300 . The value of 300 was selected
        based on it being the longest available read length of an Illumina product (MiSeq).

        The default value for max_genome_size was set by adding 2Mbp to the Minicystis rosea
        (https://www.ncbi.nlm.nih.gov/assembly/GCF_001931535.1) genome size (16,040,666 bp).

        The default value for min_genome_size was based on the above Nasuia deltocephalinicola
        genome size (112,091 bp).

        These two parameters are only applied if the genome size is estimated using Mash.
    */
    skip_fastq_check = false
    max_downloads = 3
    min_basepairs = 2241820
    min_reads = 7472
    min_coverage = 10
    min_proportion = 0.5
    min_genome_size = 100000
    max_genome_size = 18040666
    attempts = 3
    use_ena = false
    no_cache = false
    
    // QC Reads Parameters
    skip_qc = false
    skip_error_correction = false
    qc_ram = 4
    adapters = null
    adapter_k = 23
    phix = null
    phix_k = 31
    ktrim = 'r'
    mink = 11
    hdist = 1
    tpe = 't'
    tbo = 't'
    qtrim = 'rl'
    trimq = 6
    maq = 10
    minlength = 35
    ftm = 5
    tossjunk = 't'
    qout = '33'
    maxcor = 1
    sampleseed = 42

    // Assemble Genome Parameters
    shovill_ram = 8
    assembler = 'skesa'
    min_contig_len = 500
    min_contig_cov = 2
    contig_namefmt = null
    shovill_opts = null
    shovill_kmers = null
    trim = null
    nostitch = null
    nocorr = null
    unicycler_ram = 32
    unicycler_mode = 'normal'
    min_polish_size = 10000
    min_component_size = 1000
    min_dead_end_size = 1000
    no_miniasm = false
    no_pilon = false
    no_rotate = false

    // Assembly QC Parameters
    checkm_unique = 10
    checkm_multi = 10
    aai_strain = 0.9
    checkm_length = 0.7
    full_tree = null
    skip_pseudogene_correction = null
    ignore_thresholds = null
    checkm_ali = null
    checkm_nt = null
    force_domain = null
    no_refinement = null
    individual_markers = null
    skip_adj_correction = null
    skip_checkm = false
    contig_thresholds = '0,1000,10000,100000,250000,1000000'
    plots_format = 'pdf'

    // Annotate Genome Parameters
    compliant = false
    centre = 'Bactopia'
    addmrna = false
    rawproduct = null
    cdsrnaolap = null
    prokka_evalue = '1e-09'
    prokka_coverage = 80
    nogenes = false
    norrna = null
    notrna = null
    rnammer = null
    rfam = null
    skip_prodigal_tf = false

    // Minmer Sketch Parameters
    count_31mers = false
    cortex_ram = 8
    keep_singletons = false
    mash_sketch = 10000
    sourmash_scale = 10000

    // Minmer Query Parameters
    minmer_ram = 5
    no_winner_take_all = false
    screen_i = 0.8

    // Ariba Analysis Parameters
    nucmer_min_id = 90
    nucmer_min_len = 20
    nucmer_breaklen = 200
    assembly_cov = 50
    min_scaff_depth = 10
    spades_options = null
    assembled_threshold = 0.95
    gene_nt_extend = 30
    unique_threshold = 0.03
    ariba_no_clean = false

    // Call Variants Parameters
    snippy_ram = 4
    mapqual = 60
    basequal = 13
    mincov = 10
    minfrac = 0
    minqual = 100
    maxsoft = 10
    bwaopt = null
    fbopt = null
    random_tie_break = false
    disable_auto_variants = false

    // BLAST Parameters
    perc_identity = 50
    qcov_hsp_perc = 50
    max_target_seqs = 2000

    // Mapping Query Parameters
    keep_unmapped_reads = false
    bwa_mem_opts = null
    bwa_aln_opts = null
    bwa_samse_opts = null
    bwa_sampe_opts = null
    bwa_n = 9999

    // Antimicrobial Resistance Parameters
    skip_amr = false
    amr_plus = false
    amr_report_common = false
    amr_organism = null
    amr_ident_min = -1
    amr_coverage_min = 0.5
    amr_translation_table = 11
}
